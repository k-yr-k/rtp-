// Recreating 'Vega-Nor' by Victor Vasarely, 1969
// Original Artwork: https://www.albrightknox.org/artworks/k196929-vega-nor
// Version A, Recreated by Kenny Kim, 2022

function setup() {
  createCanvas(824, 824);
  background(191, 142, 84);
  noStroke();
}

let colorRef1 = [
  0,1,2,3,4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,18,19,20,
  1,2,3,4,5,6,7,8,9,10,11,9,10,11,12,13,14,15,16,17,18,19,
  2,3,4,5,6,7,8,9,10,11,12,8,9,10,11,12,13,14,15,16,17,18,
  3,4,5,6,7,8,9,10,11,12,13,7,8,9,10,11,12,13,14,15,16,17,
  4,5,6,7,8,9,10,11,12,13,14,6,7,8,9,10,11,12,13,14,15,16,
  5,6,7,8,9,10,11,12,13,14,15,5,6,7,8,9,10,11,12,13,14,15,
  6,7,8,9,10,11,12,13,14,15,16,4,5,6,7,8,9,10,11,12,13,14,
  7,8,9,10,11,12,13,14,15,16,17,3,4,5,6,7,8,9,10,11,12,13,
  8,9,10,11,12,13,14,15,16,17,18,2,3,4,5,6,7,8,9,10,11,12,
  9,10,11,12,13,14,15,16,17,18,19,1,2,3,4,5,6,7,8,9,10,11,
  10,11,12,13,14,15,16,17,18,19,20,0,1,2,3,4,5,6,7,8,9,10,
  10,9,8,7,6,5,4,3,2,1,0,20,19,18,17,16,15,14,13,12,11,10,
  11,10,9,8,7,6,5,4,3,2,1,19,18,17,16,15,14,13,12,11,10,9,
  12,11,10,9,8,7,6,5,4,3,2,18,17,16,15,14,13,12,11,10,9,8,
  13,12,11,10,9,8,7,6,5,4,3,17,16,15,14,13,12,11,10,9,8,7,
  14,13,12,11,10,9,8,7,6,5,4,16,15,14,13,12,11,10,9,8,7,6,
  15,14,13,12,11,10,9,8,7,6,5,15,14,13,12,11,10,9,8,7,6,5,
  16,15,14,13,12,11,10,9,8,7,6,14,13,12,11,10,9,8,7,6,5,4,
  17,16,15,14,13,12,11,10,9,8,7,13,12,11,10,9,8,7,6,5,4,3,
  18,17,16,15,14,13,12,11,10,9,8,12,11,10,9,8,7,6,5,4,3,2,
  19,18,17,16,15,14,13,12,11,10,9,11,10,9,8,7,6,5,4,3,2,1,
  20,19,18,17,16,15,14,13,12,11,10,10,9,8,7,6,5,4,3,2,1,0,
];
let colors1 = [
  [238, 82, 23],
  [216, 76, 50],
  [194, 46, 21],
  [172, 30, 27],
  [150, 30, 35],
  [128, 39, 41],
  [106, 43, 51],
  [84, 34, 45],
  [62, 39, 26],
  [40, 32, 35],
  [18, 30, 39],
  [27, 33, 29],
  [36, 51, 30],
  [42, 61, 57],
  [70, 75, 52],
  [99, 94, 54],
  [122, 93, 59],
  [150, 107, 54],
  [180, 126, 56],
  [206, 135, 57],
  [235, 167, 58],
];

let colors2 = [
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
];

let colors3 = [
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [26, 110, 76],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
  [3, 83, 156],
];

function draw() {
  background(158);
  rectMode(CENTER);

  
  for (let i = 0; i < 22; i += 1) {
    for (let j = 0; j < 22; j += 1) {
      const x = map(i, 0, 29, 50, 1050);
      const y = map(j, 0, 29, 50, 1050);
      const distance = dist(x, y, mouseX, mouseY);
      const pct = map(distance, 0, 325, 1, 0, true);
      let diffX = x - mouseX;
      let diffY = y - mouseY;
      colour = colors1[colorRef1[i * 22 + j]];
      fill(colour);
      square(x + diffX * pct, y + diffY * pct, (18 + 18 * pct) * 2);
    }
  }

  for (let i = 0; i < 22; i += 1) {
    for (let j = 0; j < 22; j += 1) {
      const x = map(i, 0, 29, 50, 1050);
      const y = map(j, 0, 29, 50, 1050);
      const distance = dist(x, y, mouseX, mouseY);
      const pct = map(distance, 0, 325, 1, 0, true);
      let diffX = x - mouseX;
      let diffY = y - mouseY;
      fill(colors2[i]);
      square(x + diffX * pct, y + diffY * pct, (13 + 13 * pct) * 2);
    }
  }

  for (let k = 0; k < 22; k += 1) {
    for (let l = 0; l < 22; l += 1) {
      const a = map(k, 0, 29, 50, 1050);
      const b = map(l, 0, 29, 50, 1050);
      const distance = dist(a, b, mouseX, mouseY);
      const pct = map(distance, 0, 325, 1, 0, true);
      let diffA = a - mouseX;
      let diffB = b - mouseY;
      fill(colors3[k]);
      square(a + diffA * pct, b + diffB * pct, (9 + 9 * pct) * 2);
    }
  }
}
